<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[文章分类: 信息安全 | TaurusHome]]></title>
  <link href="http://agenge.github.io/blog/categories/xin-xi-an-quan/atom.xml" rel="self"/>
  <link href="http://agenge.github.io/"/>
  <updated>2013-11-17T23:10:12+08:00</updated>
  <id>http://agenge.github.io/</id>
  <author>
    <name><![CDATA[agenge]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[安全漏洞整改解决方案]]></title>
    <link href="http://agenge.github.io/blog/2012/02/11/secure_solution/"/>
    <updated>2012-02-11T00:00:00+08:00</updated>
    <id>http://agenge.github.io/blog/2012/02/11/secure_solution</id>
    <content type="html"><![CDATA[<p>注意：以下所有操作須确认后再实施：</p>

<ul>
<li>OpenSSH 相关漏洞  </li>
</ul>


<p>解决方案</p>

<p>升级OpenSSH为最新版本,目前为5.9,首先到官网下载:<a href="http://www.openssh.com/portable.html#http">openssh-5.9p1.tar.gz</a></p>

<p>把OpenSSH 上传到服务器，检查升级前版本(以下所有操作均在root下完成)：</p>

<p><code>
shell&gt; ssh -V # 此命令会显示OpenSSL、OpenSSH的詳細版本号
</code></p>

<p>首先安装OpenSSH:</p>

<p><code>
shell&gt; tar xvf openssh-5.9p1.tar.gz
shell&gt; cd openssh-5.9p1
shell&gt; sed -i -e &amp;#8216;s/_5.9//&amp;#8217; version.h
</code></p>

<p>查询信赖包是否安装：</p>

<p><code>
shell&gt; rpm -qa | grep zlib #如果能看到zlib、zlib-devel，请继续，否则安装后再继续。
shell&gt; ./configure &amp;#8211;sysconfdir=/etc/ssh
shell&gt; make &amp;&amp; make install
</code></p>

<p>开始配置：</p>

<p><code>
shell&gt; /bin/cp /usr/local/sbin/sshd /etc/init.d/sshd
shell&gt; mkdir /root/ssh_bak  #创建备份目录
shell&gt; mv /etc/ssh/* /root/ssh_bak/  #移动到备份目录
shell&gt; /bin/cp /usr/local/etc/* /etc/ssh/
shell&gt; sed -e &amp;#8216;s@/usr/bin/ssh-keygen.*@#@&amp;#8217; /etc/init.d/sshd
shell&gt; /etc/init.d/sshd restart
shell&gt; ssh -V 检查是否是 OpenSSHp1 开头，如果是，则OpenSSH升级成功。
</code></p>

<ul>
<li>远端WEB服务器上存在/robots.txt文件</li>
</ul>


<p>解决方案： 可直接删除（可参考：<a href="http://zh.wikipedia.org/wiki/Robots.txt" title="robots.txt">http://zh.wikipedia.org/wiki/Robots.txt</a></p>

<ul>
<li>ICMP timestamp请求响应漏洞</li>
</ul>


<p>解决方案：</p>

<p><code>
shell&gt; echo 0 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all
shell&gt; echo 0  &gt;&gt; /etc/rc.local
</code></p>

<p>Windows Server 2008 参考: <a href="http://hi.baidu.com/%BA%D3%C4%CF%CD%F8%C2%B7/blog/item/91076a62831cdb4aebf8f807.html">http://hi.baidu.com/%BA%D3%C4%CF%CD%F8%C2%B7/blog/item/91076a62831cdb4aebf8f807.html</a>
Windows Server 2003参考: <a href="http://zhidao.baidu.com/question/41992099">http://zhidao.baidu.com/question/41992099</a></p>

<ul>
<li>Apache Tomcat 相关漏洞</li>
</ul>


<p>解决方案：</p>

<p>根据安全厂商给的解决方案链接：<a href="http://www.ocert.org/advisories/ocert-2011-003.html">http://www.ocert.org/advisories/ocert-2011-003.html</a> 从此页面可得知，有问题的Tomcat版本如下：&lt;= 5.5.34, &lt;= 6.0.34, &lt;= 7.0.22，而无安全漏洞的 Tomcat版本如下： 5.5.35, >= 6.0.35, >= 7.0.23</p>

<p>访问：<a href="http://tomcat.apache.org/index.html" title="Apache Tomcat">Tomcat</a>, 下载对应的Tomcat版本，例如经分在使用 Tomcat 5.5.34，下载对应的Tomcat 5.5.35,如在使用Tomcat 6.0.34，下载对应的 Tomcat 6.0.35，依此类推。</p>

<ul>
<li>Apache Tomcat sendfile请求安全限制绕过和拒绝服务漏洞：此漏洞也是通过上面的版本升级方式解决。具体请参考官方解释：</li>
</ul>


<p><a href="http://tomcat.apache.org/security-5.html#Fixed_in_Apache_Tomcat_5.5.35">http://tomcat.apache.org/security-5.html#Fixed_in_Apache_Tomcat_5.5.35</a> 和 <a href="http://secunia.com/advisories/45232/">http://secunia.com/advisories/45232/</a></p>

<!-- more -->


<ul>
<li>SNMP服务存在可读口令</li>
</ul>


<p>解决方案：</p>

<p>可按照漏洞扫描結果中的过程操作，如问困难，可向系统组同事请教。</p>

<ul>
<li>rpc相关漏洞</li>
</ul>


<p>解决方案：</p>

<p>(和项目组确认没有使用NFS后再操作)</p>

<p><code>
shell&gt; /etc/init.d/portmap stop &amp;&amp; chkconfig portmap off
shell&gt; /etc/init.d/rpcidmapd stop  &amp;&amp;  chkconfig rpcidmapd off
shell&gt; /etc/init.d/nfslock stop &amp;&amp; chkconfig nfslock off
</code></p>

<ul>
<li><p>利用SMTP/EXPN命令可猜测目标主机上的用户名 <span style="color: #ff0000;">解决方案（待确认）：</p></li>
<li><p>Oracle数据库服务器CREATE ANY DIRECTORY权限提升漏洞  <span style="color: #ff0000;">暂时没有解决方案。</p></li>
<li><p>SNMP服务可以通过SNMPV1访问  <span style="color: #ff0000;"> 解决方案（待确认）</p></li>
<li><p>Apache HTTP Server相关漏洞</p></li>
</ul>


<p>解决方案：</p>

<p>通过下载使用Apache HTTP Server 2.2.22或以上可解决，详情参考：<a href="http://mail-archives.apache.org/mod_mbox/httpd-announce/201201.mbox/browser">http://mail-archives.apache.org/mod_mbox/httpd-announce/201201.mbox/browser</a></p>

<p>此页面显示了2.2.22或以上这个版本修复了哪些安全漏洞。官方下载地址：<a href="http://www.apache.org/dyn/closer.cgi">http://www.apache.org/dyn/closer.cgi</a></p>

<p>10.1 Apache Apache::Status和Apache2::Status模块跨站脚本漏洞</p>

<p><a href="http://mail-archives.apache.org/mod_mbox/perl-advocacy/200904.mbox/%3Cad28918e0904011458h273a71d4x408f1ed286c9dfbc@mail.gmail.com%3E">http://mail-archives.apache.org/mod_mbox/perl-advocacy/200904.mbox/%3Cad28918e0904011458h273a71d4x408f1ed286c9dfbc@mail.gmail.com%3E</a></p>

<p>10.2  Apache服务器不完整HTTP请求拒绝服务漏洞[精确扫描]:
更改httpd.conf中 TimeOut 的值为30秒</p>

<p>11.远端WWW服务支持TRACE请求 解决方案 请参考第10点。</p>

<p>12.Oracle tnslsnr没有设置口令  解决方案：
扫描报告已经明确写出详细步骤，或DBA自己完成。</p>

<p>13. 猜测出远程FTP服务存在可登录的用户名口令  解决方案：
确认账号的密码复杂性，例如检查是否存在123456 类似这样的密码，如有简单密码，确认后再修改。</p>

<p>14.目标主机showmount -e信息泄露 解决方案：
确认是否有NFS服务在运行，如在运行确认是否关闭，如因有业务影响请在整改报告中明确写出原因（但绝不能外网访问NFS）。</p>

<p>15.检测到远端rlogin服务正在运行中  解决方案：
如果是AIX系统，请在整改报告中明确写出原因（但绝不能外网登录）。</p>

<p>16.远端运行着IDENT服务  解决方案：
漏洞扫描报告中已经有详细的操作步骤。</p>

<p>17.检测到远端rsh服务正在运行中   解决方案：
如果是AIX系统，请在整改报告中明确写出原因（但绝不能外网登录）。</p>

<p>18.检测到远端rexec服务正在运行中  解决方案：
漏洞扫描报告中已经有详细的操作步骤。</p>

<p>19.存在一个可用的远程代理服务器  <span style="color: #ff0000;">解决方案待确认。</p>

<p>20.远程web主机存在目录遍历漏洞  <span style="color: #ff0000;"> 解决方案待确认。</p>

<p>21. 远程主机允许匿名FTP登录  解决方案：
修改配置文件，不许出现匿名登录，由于FTP的类型较多，具体的操作步骤可咨询系统组同事。</p>

<p>22.FTP服务器版本信息可被获取  <span style="color: #00ff00;">无需整改（因要修改源码重新编译）。</p>

<p>23.远端SSH Server允许使用低版本SSH协议  解决方案：
参考漏洞扫描报告中的操作步骤，或参考第1点直接升级OpenSSH版本（强烈建议）。</p>

<p>24.检测到远端XDMCP服务正在运行中  解决方案：
关闭XDMCP服务</p>

<ol>
<li><p>PHP相关漏洞  解决方案：
根据<a href="http://www.venustech.com.cn/NewsInfo/124/6459.Html">http://www.venustech.com.cn/NewsInfo/124/6459.Html</a> 可得知，受影响版本是：</p></li>
<li><p>PHP 5.2 &lt;= 5.2.13</p></li>
<li>PHP 5.3 &lt;= 5.3.2</li>
</ol>


<p>目前最好的办法是升级PHP版本。官方最新稳定是：PHP 5.3.10。 而5.2.X 最高版本是：PHP 5.2.17</p>
]]></content>
  </entry>
  
</feed>
